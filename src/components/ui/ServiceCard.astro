---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import Card from "./Card.astro";

import gob from "../../assets/arrow-dark.svg";
import wob from "../../assets/arrow-white.svg";

/* Bit of a bodge this... */
import c1 from "../../assets/pics/card-pic1.png";
import c2 from "../../assets/pics/card-pic2.png";
import c3 from "../../assets/pics/card-pic3.png";
import c4 from "../../assets/pics/card-pic4.png";
import c5 from "../../assets/pics/card-pic5.png";

const imageDictionary: { [key: number]: ImageMetadata } = {};
imageDictionary[0] = c1;
imageDictionary[1] = c2;
imageDictionary[2] = c3;
imageDictionary[3] = c4;
imageDictionary[4] = c5;

/* 
1. Gray card with green title and green on black icon 
2. Green card with gray title and green on black icon
3. Black card with gray title and gray on black icon
*/

const { service } = Astro.props;

interface Props {
  service: CollectionEntry<'services'>;
}
---

<Card isUnderline={false}>
  <div
    class=`h-[300px] w-full sm:h-full lg:gap-[60px] grid custom-grid lg:grid-cols-2 lg:grid-rows-1 p-8 sm:p-[50px] rounded-[45px] ${service.data.service_id % 3 === 1 ? 'bg-gray' : service.data.service_id % 3 === 2 ? 'bg-green' : 'bg-dark text-gray'}`
  >
    <h3 class=`flex flex-col col-span-2 lg:col-span-1`>
      <span class=`w-[fit-content] ${service.data.service_id % 3 === 1 ? 'greenhead' : 'whitehead'}`
        >{service.data.titleTop}</span
      >
      <span class=`w-[fit-content] ${service.data.service_id % 3 === 1 ? 'greenhead' : 'whitehead'}`
        >{service.data.titleBottom}</span
      >
    </h3>
    <picture
      class="w-full h-full row-span-1 order-1 lg:order-none lg:row-span-2 flex justify-center items-center"
    >
      <Image
        src={imageDictionary[service.data.service_id % 5]}
        alt={service.data.alt}
        class="h-[100px] w-auto sm:h-auto sm:w-3/4 object-cover"
      />
    </picture>
    <div class="flex items-end">
      <a href={'/fjelltopp-astro/services/' + service.id} class="flex items-center gap-3.5"
        ><Image src={service.data.service_id % 3 === 1 || service.data.service_id % 3 === 2 ? gob : wob} alt="Click for more details" />
        <span class="hidden sm:block">More info</span></a
      >
    </div>
  </div>
</Card>

<style>
  .custom-grid {
    grid-template: auto auto;
  }
</style>
